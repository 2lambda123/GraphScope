# Performance

## BI analysis

We used 40 aliyun re4.20xlarge machines for benchmarking LDBC SNB BI queries on graph with scale factor 30k. The following table shows the query elapsed time on the initial snapshot.

| Query  | Time (s)   |
| ------ | ---------- |
| BI 1   |  1.15      |
| BI 2   |  0.77      |
| BI 3   |  24.33     |
| BI 4   |  48.07     |
| BI 5   |  0.86      |
| BI 6   |  6.63      |
| BI 7   |  2.17      |
| BI 8   |  1.08      |
| BI 9   |  12.90     |
| BI 10  |  5.77      |
| BI 11  |  6.73      |
| BI 13  |  9.32      |
| BI 14  |  15.82     |
| BI 15  |  20.84     |
| BI 16  |  69.02     |
| BI 17  |  6.90      |
| BI 18  |  2.34      |
| BI 19  |  1310.22   |
| BI 20  |  2.52      |

## High QPS Queries

Two r5d.12xlarge instances on AWS were used to run the LDBC SNB interactive workloads. One for LDBC SNB interactive driver and one for GraphScope engine.

The benchmark run with scale factors 30, 100 and 300. The following table shows the performance summary.

| Scale Factor  |  Time Compression Ratio  | Data Loading Time(s) |  Throughput(ops/s)  |
| ------ | ---------- | ----- | ---------- |
| 30 | 0.00112 | 269.385 | 33,086.60 |
| 100 | 0.0039 | 905.19 | 33,613.31 |
| 300 | 0.014 | 2707.81 | 33,267.12 |

Detailed performance benchmark results for scale factor 30:

| Query   | Total count | Min. | Max. | Mean | P50  | P90  | P95  | P99  |
| ------- | ----------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|Query1|1,625,244|461|343,488|1,513.40|1,013|1,262|1,374|18,935|
|Query2|1,142,064|600|349,824|1,899.89|1,753|2,345|2,492|3,201|
|Query3|398,645|3,224|346,736|6,284.94|6,474|7,307|7,609|8,767|
|Query4|1,173,787|276|346,832|1,010.76|619|899|1,020|1,579|
|Query5|586,894|36,512|615,648|156,096.16|150,760|237,288|252,808|276,480|
|Query6|133,723|225|273,728|829.41|680|1,193|1,286|1,572|
|Query7|880,341|162|324,576|503.99|279|411|451|578|
|Query8|4,695,150|565|337,264|2,332.52|1,805|3,542|4,112|5,285|
|Query9|110,043|69,528|615,552|208,762.24|214,848|284,496|298,000|322,144|
|Query10|1,142,064|2,545|335,728|9,635.24|9,405|12,588|13,569|16,177|
|Query11|2,112,817|189|358,272|420.48|300|429|465|576|
|Query12|960,371|2,648|367,216|13,012.71|12,500|17,492|19,133|22,589|
|Query13|2,224,018|172|310,656|452.83|333|482|531|689|
|Query14|862,375|439|396,336|15,852.55|8,886|21,813|91,708|136,424|
|Short1|22,651,456|147|358,128|344.23|225|365|404|527|
|Short2|22,651,456|149|364,640|420.87|293|463|540|852|
|Short3|22,651,456|152|370,032|499.02|335|618|1,014|1,527|
|Short4|22,654,548|146|362,784|369.23|236|373|406|539|
|Short5|22,654,548|146|380,896|334.64|221|356|397|486|
|Short6|22,654,548|147|356,032|330.84|221|355|397|485|
|Short7|22,654,548|146|355,104|340.83|229|362|405|494|
|Update1|12,946|222|261,224|566.51|382|616|717|1,099|
|Update2|9,844,769|182|347,568|531.44|290|426|473|1,033|
|Update3|10,983,264|181|372,608|512.43|290|422|469|927|
|Update4|229,785|190|349,008|519.96|298|436|484|1,026|
|Update5|34,908,151|181|364,656|543.60|290|427|474|1,097|
|Update6|2,967,525|184|323,520|504.24|299|452|503|985|
|Update7|8,503,040|187|339,088|532.64|300|449|501|1,077|
|Update8|913,173|189|335,184|520.07|291|425|472|969|

Detailed performance benchmark results for scale factor 100:

| Query   | Total count | Min. | Max. | Mean | P50  | P90  | P95  | P99  |
| ------- | ----------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|Query1|1,496,789|236|473,936|3,453.68|1,271|1,583|29,530|39,742|
|Query2|1,051,798|175|486,272|2,388.88|2,271|2,938|3,107|3,511|
|Query3|316,394|8,827|473,040|17,538.01|18,098|19,607|20,597|22,472|
|Query4|1,081,014|225|473,792|813.92|662|963|1,068|1,341|
|Query5|498,930|3,042|687,264|161,555.34|163,424|216,688|228,184|248,376|
|Query6|89,670|244|466,880|1,281.13|606|2,265|2,418|2,732|
|Query7|1,024,119|167|434,640|395.45|290|427|461|548|
|Query8|7,783,303|162|504,672|397.58|283|420|449|515|
|Query9|73,845|224|741,344|326,794.86|338,000|418,416|435,392|466,000|
|Query10|972,913|191|477,328|11,218.68|11,033|13,782|14,650|17,644|
|Query11|1,768,932|185|514,272|443.13|328|466|495|563|
|Query12|884,466|166|467,424|15,357.46|14,925|20,178|21,888|26,104|
|Query13|2,048,238|187|471,040|590.44|487|666|720|822|
|Query14|794,214|570|601,472|46,234.06|12,634|144,392|158,296|183,856|
|Short1|24,957,659|148|483,632|335.25|232|389|417|486|
|Short2|24,957,659|157|503,808|425.50|321|508|598|921|
|Short3|24,957,659|155|524,288|536.01|383|708|1,211|1,774|
|Short4|24,955,840|149|503,440|365.33|248|390|417|489|
|Short5|24,955,840|147|495,888|325.84|227|385|414|472|
|Short6|24,955,840|148|508,464|324.70|227|385|414|472|
|Short7|24,955,840|152|498,736|336.71|241|398|428|487|
|Update1|9,945|226|426,048|795.01|413|635|732|1,115|
|Update2|7,066,491|186|519,184|616.23|306|452|493|838|
|Update3|10,925,357|185|521,008|611.14|306|452|493|843|
|Update4|170,420|198|485,728|599.24|313|462|507|892|
|Update5|21,709,068|185|501,552|609.29|305|451|493|843|
|Update6|2,325,970|191|481,920|765.44|321|485|542|1,368|
|Update7|7,400,651|191|515,248|658.22|317|478|531|1,121|
|Update8|777,860|189|487,072|616.71|309|454|497|840|

Detailed performance benchmark results for scale factor 300:

| Query   | Total count | Min. | Max.    | Mean     | P50   | P90   | P95  | P99  |
| ------- | ----------- | ---- | ------- | -------- | ----- | ----- | ---- | ---- |
|Query1|1,190,062|305|726,880|2,431.75|1,560|1,869|1,988|51,486|
|Query2|836,259|171|697,248|2,846.37|2,664|3,566|3,774|4,258|
|Query3|217,899|25,514|626,880|51,963.27|52,620|58,264|60,468|65,648|
|Query4|859,489|229|694,752|983.22|770|1,136|1,244|1,504|
|Query5|368,353|200|897,408|216,675.80|223,096|302,896|317,840|345,008|
|Query6|53,348|259|511,808|2,592.49|702|5,125|5,482|6,180|
|Query7|966,925|177|658,208|466.71|318|457|489|585|
|Query8|10,313,867|159|700,896|454.64|292|432|458|530|
|Query9|43,889|232|897,440|455,505.72|460,448|589,632|619,200|666,368|
|Query10|703,218|194|662,560|13,023.28|12,766|16,517|17,663|20,446|
|Query11|1,289,233|203|597,408|558.46|393|532|561|650|
|Query12|703,218|165|716,032|16,973.37|16,523|23,654|25,826|30,470|
|Query13|1,628,505|243|782,592|894.13|756|966|1,016|1,188|
|Query14|631,461|580|816,320|89,974.71|21,553|221,016|242,928|287,504|
|Short1|24,862,263|149|752,576|378.58|242|406|431|502|
|Short2|24,862,263|158|712,704|485.43|357|559|677|1,082|
|Short3|24,862,263|152|700,480|623.34|433|801|1,376|2,066|
|Short4|24,860,659|148|713,760|418.41|267|404|429|506|
|Short5|24,860,659|147|739,264|364.51|235|404|428|491|
|Short6|24,860,659|145|720,288|363.82|236|405|429|493|
|Short7|24,860,659|158|666,016|387.23|263|430|456|521|
|Update1|6,980|258|461,296|1,009.64|468|682|784|1,476|
|Update2|6,967,271|187|726,720|739.52|319|471|513|1,015|
|Update3|14,037,564|186|729,088|739.93|319|471|513|1,031|
|Update4|119,708|197|606,464|761.11|334|488|537|1,097|
|Update5|16,380,972|186|731,456|743.64|319|471|513|1,031|
|Update6|2,172,529|195|695,136|1,653.11|355|535|631|12,982|
|Update7|10,848,212|192|709,088|728.58|339|499|558|1,190|
|Update8|623,005|193|716,224|753.32|339|489|540|1,064|

## Graph analytics

We have evaluated performance of [libgrape-lite](https://github.com/alibaba/libgrape-lite) with [LDBC Graph Analytics Benchmark](http://graphalytics.org/), the following table shows the results, and the detailed report is [here](https://github.com/alibaba/libgrape-lite/blob/master/Performance.md).

| Algorithm | Dataset        | GraphScope |
| --------- | -------------- | ---------- |
| SSSP      | datagen-9_0-fb | 0.42       |
|           | datagen-9_1-fb | 0.56       |
|           | datagen-9_2-zf | 1.48       |
| WCC       | datagen-9_0-fb | 0.41       |
|           | datagen-9_1-fb | 0.50       |
|           | datagen-9_2-zf | 1.32       |
|           | graph500-26    | 0.71       |
|           | com-friendster | 1.97       |
| BFS       | datagen-9_0-fb | 0.07       |
|           | datagen-9_1-fb | 0.13       |
|           | datagen-9_2-zf | 1.16       |
|           | graph500-26    | 0.20       |
|           | com-friendster | 0.74       |
| PageRank  | datagen-9_0-fb | 1.40       |
|           | datagen-9_1-fb | 1.73       |
|           | datagen-9_2-zf | 3.83       |
|           | graph500-26    | 2.42       |
|           | com-friendster | 6.04       |
| CDLP      | datagen-9_0-fb | 8.18       |
|           | datagen-9_1-fb | 10.40      |
|           | datagen-9_2-zf | 19.48      |
|           | graph500-26    | 7.59       |
|           | com-friendster | 19.10      |
| LCC       | datagen-9_0-fb | 14.51      |
|           | datagen-9_1-fb | 18.35      |
|           | datagen-9_2-zf | 8.98       |
|           | graph500-26    | 201.20     |
|           | com-friendster | 61.44      |
